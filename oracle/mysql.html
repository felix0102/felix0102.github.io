<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mysql | Some of my notes</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Hello, VuePress!">
    <link rel="preload" href="/assets/css/0.styles.ccac5a78.css" as="style"><link rel="preload" href="/assets/js/app.1bdc9612.js" as="script"><link rel="preload" href="/assets/js/2.1ce52c5d.js" as="script"><link rel="preload" href="/assets/js/78.cb45b9f4.js" as="script"><link rel="prefetch" href="/assets/js/10.7604792c.js"><link rel="prefetch" href="/assets/js/100.54bb7d3b.js"><link rel="prefetch" href="/assets/js/101.93f1ea81.js"><link rel="prefetch" href="/assets/js/102.44c6dc4c.js"><link rel="prefetch" href="/assets/js/11.fbfee2dd.js"><link rel="prefetch" href="/assets/js/12.47589572.js"><link rel="prefetch" href="/assets/js/13.da8d1a6c.js"><link rel="prefetch" href="/assets/js/14.6a411613.js"><link rel="prefetch" href="/assets/js/15.d3299691.js"><link rel="prefetch" href="/assets/js/16.6529f869.js"><link rel="prefetch" href="/assets/js/17.3abce8c1.js"><link rel="prefetch" href="/assets/js/18.d321540d.js"><link rel="prefetch" href="/assets/js/19.9b0c4efe.js"><link rel="prefetch" href="/assets/js/20.bdfdc27a.js"><link rel="prefetch" href="/assets/js/21.a197c78c.js"><link rel="prefetch" href="/assets/js/22.11e43f38.js"><link rel="prefetch" href="/assets/js/23.8ed6a2cd.js"><link rel="prefetch" href="/assets/js/24.c0aafb51.js"><link rel="prefetch" href="/assets/js/25.a251ec12.js"><link rel="prefetch" href="/assets/js/26.9c73ce08.js"><link rel="prefetch" href="/assets/js/27.0f68e974.js"><link rel="prefetch" href="/assets/js/28.dda890e2.js"><link rel="prefetch" href="/assets/js/29.e4c94034.js"><link rel="prefetch" href="/assets/js/3.50744ef0.js"><link rel="prefetch" href="/assets/js/30.6a2b5705.js"><link rel="prefetch" href="/assets/js/31.dbfd828d.js"><link rel="prefetch" href="/assets/js/32.4ec21949.js"><link rel="prefetch" href="/assets/js/33.31d58b63.js"><link rel="prefetch" href="/assets/js/34.ab44651b.js"><link rel="prefetch" href="/assets/js/35.78e82986.js"><link rel="prefetch" href="/assets/js/36.00c61c64.js"><link rel="prefetch" href="/assets/js/37.1eb74be4.js"><link rel="prefetch" href="/assets/js/38.3e813362.js"><link rel="prefetch" href="/assets/js/39.647b508b.js"><link rel="prefetch" href="/assets/js/4.a7ac34a6.js"><link rel="prefetch" href="/assets/js/40.c783cf11.js"><link rel="prefetch" href="/assets/js/41.40bb819b.js"><link rel="prefetch" href="/assets/js/42.487d2b5b.js"><link rel="prefetch" href="/assets/js/43.cd2ed31c.js"><link rel="prefetch" href="/assets/js/44.212273f2.js"><link rel="prefetch" href="/assets/js/45.2d56bfe3.js"><link rel="prefetch" href="/assets/js/46.745a74a8.js"><link rel="prefetch" href="/assets/js/47.20d54662.js"><link rel="prefetch" href="/assets/js/48.24df1f1f.js"><link rel="prefetch" href="/assets/js/49.efe4f912.js"><link rel="prefetch" href="/assets/js/5.a6bf4d86.js"><link rel="prefetch" href="/assets/js/50.240683fd.js"><link rel="prefetch" href="/assets/js/51.69d75721.js"><link rel="prefetch" href="/assets/js/52.3e48cd30.js"><link rel="prefetch" href="/assets/js/53.3f5efb27.js"><link rel="prefetch" href="/assets/js/54.84e054cb.js"><link rel="prefetch" href="/assets/js/55.dd74fcad.js"><link rel="prefetch" href="/assets/js/56.2cdddc9b.js"><link rel="prefetch" href="/assets/js/57.31388f8e.js"><link rel="prefetch" href="/assets/js/58.1cf23f34.js"><link rel="prefetch" href="/assets/js/59.a66bc6e3.js"><link rel="prefetch" href="/assets/js/6.5666a477.js"><link rel="prefetch" href="/assets/js/60.2f9ad10d.js"><link rel="prefetch" href="/assets/js/61.ca08e66b.js"><link rel="prefetch" href="/assets/js/62.73b03dc4.js"><link rel="prefetch" href="/assets/js/63.95143f10.js"><link rel="prefetch" href="/assets/js/64.ca12f361.js"><link rel="prefetch" href="/assets/js/65.c9868457.js"><link rel="prefetch" href="/assets/js/66.d961caec.js"><link rel="prefetch" href="/assets/js/67.f4463c14.js"><link rel="prefetch" href="/assets/js/68.763e362c.js"><link rel="prefetch" href="/assets/js/69.eb5440bc.js"><link rel="prefetch" href="/assets/js/7.e50c1d2e.js"><link rel="prefetch" href="/assets/js/70.13b90785.js"><link rel="prefetch" href="/assets/js/71.fb6f6189.js"><link rel="prefetch" href="/assets/js/72.17356d70.js"><link rel="prefetch" href="/assets/js/73.8037a311.js"><link rel="prefetch" href="/assets/js/74.e1fecc35.js"><link rel="prefetch" href="/assets/js/75.75ac11fd.js"><link rel="prefetch" href="/assets/js/76.2a376568.js"><link rel="prefetch" href="/assets/js/77.2f912849.js"><link rel="prefetch" href="/assets/js/79.e99f3946.js"><link rel="prefetch" href="/assets/js/8.a7bf67bd.js"><link rel="prefetch" href="/assets/js/80.98f7a9b8.js"><link rel="prefetch" href="/assets/js/81.77673ce8.js"><link rel="prefetch" href="/assets/js/82.6da9e559.js"><link rel="prefetch" href="/assets/js/83.a226a6f5.js"><link rel="prefetch" href="/assets/js/84.149db13e.js"><link rel="prefetch" href="/assets/js/85.a0f59112.js"><link rel="prefetch" href="/assets/js/86.b3f3292d.js"><link rel="prefetch" href="/assets/js/87.17a04e28.js"><link rel="prefetch" href="/assets/js/88.0a2115b8.js"><link rel="prefetch" href="/assets/js/89.31db3c7e.js"><link rel="prefetch" href="/assets/js/9.90e0f26f.js"><link rel="prefetch" href="/assets/js/90.c81c9788.js"><link rel="prefetch" href="/assets/js/91.244d9fab.js"><link rel="prefetch" href="/assets/js/92.40c1f6fa.js"><link rel="prefetch" href="/assets/js/93.6e11e9dd.js"><link rel="prefetch" href="/assets/js/94.5f3326b2.js"><link rel="prefetch" href="/assets/js/95.ee7c907b.js"><link rel="prefetch" href="/assets/js/96.1cc91fcf.js"><link rel="prefetch" href="/assets/js/97.380010c8.js"><link rel="prefetch" href="/assets/js/98.dba928b5.js"><link rel="prefetch" href="/assets/js/99.bcb7b171.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ccac5a78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Some of my notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/shell/" class="nav-link">
  Shell
</a></div><div class="nav-item"><a href="/open-source/" class="nav-link">
  open-source
</a></div><div class="nav-item"><a href="/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><a href="/oracle/" class="nav-link router-link-active">
  Oracle
</a></div><div class="nav-item"><a href="/oci/" class="nav-link">
  OCI
</a></div><div class="nav-item"><a href="/spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  More
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/shell/" class="nav-link">
  Shell
</a></div><div class="nav-item"><a href="/open-source/" class="nav-link">
  open-source
</a></div><div class="nav-item"><a href="/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><a href="/oracle/" class="nav-link router-link-active">
  Oracle
</a></div><div class="nav-item"><a href="/oci/" class="nav-link">
  OCI
</a></div><div class="nav-item"><a href="/spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  More
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>oracle</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/oracle/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/oracle/harmmerdb-oracle.html" class="sidebar-link">harmmerdb</a></li><li><a href="/oracle/mysql.html" aria-current="page" class="active sidebar-link">mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/oracle/mysql.html#yum-install" class="sidebar-link">yum install</a></li><li class="sidebar-sub-header"><a href="/oracle/mysql.html#开启mysql-远程链接" class="sidebar-link">开启mysql 远程链接</a></li><li class="sidebar-sub-header"><a href="/oracle/mysql.html#新建远程用户" class="sidebar-link">新建远程用户</a></li><li class="sidebar-sub-header"><a href="/oracle/mysql.html#找回密码" class="sidebar-link">找回密码</a></li><li class="sidebar-sub-header"><a href="/oracle/mysql.html#修改datadir-启动报权限error" class="sidebar-link">修改DataDir 启动报权限error</a></li><li class="sidebar-sub-header"><a href="/oracle/mysql.html#mysql-pasword" class="sidebar-link">mysql pasword</a></li></ul></li><li><a href="/oracle/oracle-cdb-pdb-migration.html" class="sidebar-link">不同CDB之间迁移PDB</a></li><li><a href="/oracle/oracle-expdp.html" class="sidebar-link">expdp 导出</a></li><li><a href="/oracle/oracle-impdp.html" class="sidebar-link">查看数据库信息</a></li><li><a href="/oracle/oracle-install.html" class="sidebar-link">安装Oracle instant client</a></li><li><a href="/oracle/oracle-link.html" class="sidebar-link">oracle database</a></li><li><a href="/oracle/oracle-mma-dr-dataguard.html" class="sidebar-link">Dataguard</a></li><li><a href="/oracle/oracle-rman.html" class="sidebar-link">RMAN DUPLICATE from an Active Database</a></li><li><a href="/oracle/oracle-scn.html" class="sidebar-link">查看SCN</a></li><li><a href="/oracle/oracle-session.html" class="sidebar-link">查看session：</a></li><li><a href="/oracle/oracle-uninstall.html" class="sidebar-link">/oracle/oracle-uninstall.html</a></li><li><a href="/oracle/sql-developer.html" class="sidebar-link">sql-developer don't lose connection</a></li><li><a href="/oracle/sqlplus-charset.html" class="sidebar-link">查看linux操作系统的字符集</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="yum-install"><a href="#yum-install" class="header-anchor">#</a> yum install</h2> <ul><li>yum repository <a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener noreferrer">yum repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</p></blockquote> <blockquote><p>rpm -ivh mysql80-community-release-el7-3.noarch.rpm</p></blockquote> <blockquote><p>yum install -y  mysql-community-server</p></blockquote> <ul><li>配置文件</li></ul> <blockquote><p>vi /etc/my.cnf</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>[mysqld]

port = 3306

character-set-server=utf8mb4
collation-server=utf8mb4_general_ci

# 表名不区分大小写(启动前配置)
lower_case_table_names=1

#设置日志时区和系统一致
log_timestamps=SYSTEM

[client]
default-character-set=utf8mb4

</code></pre></div><ul><li>启动服务</li></ul> <div class="language- extra-class"><pre class="language-text"><code>#启动服务
systemctl start mysqld

#查看版本信息
mysql -V

#查看状态
systemctl status mysqld

##开机启动
systemctl enable mysqld
systemctl daemon-reload

</code></pre></div><ul><li>修改账号账号密码</li></ul> <div class="language- extra-class"><pre class="language-text"><code>#1、查看MySQL为Root账号生成的临时密码
grep &quot;A temporary password&quot; /var/log/mysqld.log

#2、进入MySQL shell
mysql -u root -p

#3、修改密码
ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass4!';

</code></pre></div><h2 id="开启mysql-远程链接"><a href="#开启mysql-远程链接" class="header-anchor">#</a> 开启mysql 远程链接</h2> <div class="language- extra-class"><pre class="language-text"><code>#选择 mysql 数据库：
USE mysql;

#在 mysql 数据库的 user 表中查看当前 root 用户的相关信息：
SELECT host, user, authentication_string, plugin FROM user;

#设置root 用户远程访问：
update user set host = '%' where user ='root';

#刷新权限：
FLUSH PRIVILEGES;

#授权的所有权限
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%';

#更新 root 用户密码及加密规则（如果客户端不支持加密插件）：
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'MyNewPass4!';

#刷新权限：
FLUSH PRIVILEGES;

</code></pre></div><h2 id="新建远程用户"><a href="#新建远程用户" class="header-anchor">#</a> 新建远程用户</h2> <div class="language- extra-class"><pre class="language-text"><code>#1、新建远程用户
CREATE USER 'devops'@'%' IDENTIFIED BY 'MyNewPass3!';

#2、赋予指定账户指定(数据库名称.表名)远程访问权限
GRANT ALL PRIVILEGES ON mydb_name.* TO 'devops'@'%';

#3、查看权限
SHOW GRANTS FOR 'devops'@'%';

#4、收回权限
REVOKE ALL PRIVILEGES ON *.* FROM 'devops'@'%';

#5、删除用户
DROP USER 'devops'@'%';

#6、刷新权限
FLUSH PRIVILEGES;

</code></pre></div><h2 id="找回密码"><a href="#找回密码" class="header-anchor">#</a> 找回密码</h2> <ul><li>如果忘记了MySQL root密码，可以用以下方法重新设置：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>#1.关闭MySQL
service mysql stop

#2.用以下命令启动MySQL，以不检查权限的方式启动；
service mysql start --skip-grant-tables

#3.然后用空密码方式使用root用户登录 MySQL；
mysql -u root

</code></pre></div><h2 id="修改datadir-启动报权限error"><a href="#修改datadir-启动报权限error" class="header-anchor">#</a> 修改DataDir 启动报权限error</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/selinux-file-context.html" target="_blank" rel="noopener noreferrer">13 Permission error<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code>Setting the MySQL Data Directory Context
The default data directory location is /var/lib/mysql/; and the SELinux context used is mysqld_db_t.

If you edit the configuration file to use a different location for the data directory, or for any of the files normally in the data directory (such as the binary logs), you may need to set the context for the new location. For example:

semanage fcontext -a -t mysqld_db_t &quot;/path/to/my/custom/datadir(/.*)?&quot;
restorecon -Rv /path/to/my/custom/datadir

semanage fcontext -a -t mysqld_db_t &quot;/path/to/my/custom/logdir(/.*)?&quot;
restorecon -Rv /path/to/my/custom/logdir
Setting the MySQL Error Log File Context
The default location for RedHat RPMs is /var/log/mysqld.log; and the SELinux context type used is mysqld_log_t.

If you edit the configuration file to use a different location, you may need to set the context for the new location. For example:

semanage fcontext -a -t mysqld_log_t &quot;/path/to/my/custom/error.log&quot;
restorecon -Rv /path/to/my/custom/error.log
</code></pre></div><h2 id="mysql-pasword"><a href="#mysql-pasword" class="header-anchor">#</a> mysql pasword</h2> <ul><li>initial password /var/log/mysqld.log</li> <li>modify passwod</li></ul> <blockquote><p>alter user 'root'@'localhost' identified by 'OrcWelcome_123';</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/oracle/harmmerdb-oracle.html" class="prev">
        harmmerdb
      </a></span> <span class="next"><a href="/oracle/oracle-cdb-pdb-migration.html">
        不同CDB之间迁移PDB
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1bdc9612.js" defer></script><script src="/assets/js/2.1ce52c5d.js" defer></script><script src="/assets/js/78.cb45b9f4.js" defer></script>
  </body>
</html>
