(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{257:function(e,a,t){"use strict";t.r(a);var s=t(6),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h3",{attrs:{id:"查看数据库信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看数据库信息"}},[e._v("#")]),e._v(" 查看数据库信息")]),e._v(" "),t("ul",[t("li",[e._v("sqlplus / as sysdba")]),e._v(" "),t("li",[e._v("show con_name")]),e._v(" "),t("li",[e._v("show pdbs")]),e._v(" "),t("li",[e._v("SELECT directory_name, directory_path FROM dba_directories")])]),e._v(" "),t("h3",{attrs:{id:"查询表空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询表空间"}},[e._v("#")]),e._v(" 查询表空间")]),e._v(" "),t("ul",[t("li",[e._v("select tablespace_name,file_id,file_name,round(bytes/(1024*1024),0) total_space from dba_data_files;")]),e._v(" "),t("li",[e._v("select tablespace_name,file_id,round(bytes/(1024*1024),0) total_space from dba_data_files;")]),e._v(" "),t("li",[e._v("select tablespace_name,file_name,round(bytes/(1024*1024),0) total_space from dba_data_files;")]),e._v(" "),t("li",[e._v("查询scott用户默认表空间，默认临时表空间")])]),e._v(" "),t("blockquote",[t("p",[e._v("select username,default_tablespace,temporary_tablespace from dba_users where username='SCOTT';")])]),e._v(" "),t("ul",[t("li",[e._v("查询scott用户下所有表使用的表空间")])]),e._v(" "),t("blockquote",[t("p",[e._v("select owner,table_name,tablespace_name from dba_tables where owner='SCOTT';")])]),e._v(" "),t("ul",[t("li",[e._v("查询所有表空间剩余空间大小")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('SELECT TABLESPACE_NAME,\n       ROUND(SUM(BYTES) / (1024 * 1024), 2) "空闲空间(M)",\n       ROUND(MAX(BYTES) / (1024 * 1024), 2) "最大块(M)"\nFROM SYS.DBA_FREE_SPACE\nGROUP BY TABLESPACE_NAME\n')])])]),t("h3",{attrs:{id:"增加表空间大小的方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增加表空间大小的方式"}},[e._v("#")]),e._v(" 增加表空间大小的方式")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("--第一种：格式化数据文件初始大小并设置自增长到最大值\ncreate tablespace d_test1  datafile '/test1_data/datafile01.dbf' size 10m autoextend on next 5m maxsize 100m;\n \n--第二种：格式化数据文件初始大小不设置自增长，当然也就没有最大值\nalter tablespace d_test1 add datafile '/test1_data/datafile02.dbf' size 10m;\n")])])]),t("h3",{attrs:{id:"新建表空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建表空间"}},[e._v("#")]),e._v(" 新建表空间")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("create tablespace SDATA datafile '+DATA/DB1205_BOM1GJ/98F2BF3D2E590C53E0530300000AA88C/DATAFILE/SDATA.dbf' size 1000G ;")])]),e._v(" "),t("li",[t("p",[e._v("create BIGFILE  tablespace SDATA datafile 'SDATA.dbf' size 100G REUSE AUTOEXTEND ON NEXT 5G MAXSIZE 1500G;")])]),e._v(" "),t("li",[t("p",[e._v("create temporary tablespace SDATATemp tempfile 'SDATAtemp01.dbf'  size 10G autoextend on next 2G maxsize 20G extent management local  ;")])]),e._v(" "),t("li",[t("p",[e._v("create BIGFILE tablespace SINDEX datafile 'SINDEX.dbf' size 100G autoextend ON NEXT 5G MAXSIZE 1500G;")])]),e._v(" "),t("li",[t("p",[e._v("create BIGFILE  tablespace INFO_USER datafile 'INFO_USER.dbf' size 100G AUTOEXTEND ON NEXT 5G MAXSIZE 1500G;")])])]),e._v(" "),t("h3",{attrs:{id:"删除表空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除表空间"}},[e._v("#")]),e._v(" 删除表空间")]),e._v(" "),t("ul",[t("li",[e._v("DROP TABLESPACE SINDEX INCLUDING CONTENTS AND DATAFILES;")])]),e._v(" "),t("h3",{attrs:{id:"新建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建用户"}},[e._v("#")]),e._v(" 新建用户")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("create user siebel identified by siebel default tablespace SDATA temporary tablespace SDATATemp;")])]),e._v(" "),t("li",[t("p",[e._v("grant connect, resource to siebel;")])]),e._v(" "),t("li",[t("p",[e._v("grant dba to siebel;")])]),e._v(" "),t("li",[t("p",[e._v("create user INFO_USER identified by INFO_USER default tablespace INFO_USER temporary tablespace SDATATemp;")])]),e._v(" "),t("li",[t("p",[e._v("grant connect, resource to INFO_USER;")])]),e._v(" "),t("li",[t("p",[e._v("grant dba to INFO_USER;")])]),e._v(" "),t("li",[t("p",[e._v("grant execute on sys.dbms_stats to INFO_USER;")])])]),e._v(" "),t("h3",{attrs:{id:"删除用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除用户"}},[e._v("#")]),e._v(" 删除用户")]),e._v(" "),t("ul",[t("li",[e._v("drop user siebel;")]),e._v(" "),t("li",[e._v("drop user siebel cascade;")])]),e._v(" "),t("h3",{attrs:{id:"新建一个role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建一个role"}},[e._v("#")]),e._v(" 新建一个role")]),e._v(" "),t("ul",[t("li",[e._v("create role SSE_ROLE;")]),e._v(" "),t("li",[e._v("create role SREAD_ROLE;")]),e._v(" "),t("li",[e._v("create role DONGTX;")]),e._v(" "),t("li",[e._v("grant connect, resource to SSE_ROLE;")])]),e._v(" "),t("h3",{attrs:{id:"删除一个role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除一个role"}},[e._v("#")]),e._v(" 删除一个role")]),e._v(" "),t("ul",[t("li",[e._v("drop role SSE_ROLE;")])]),e._v(" "),t("h3",{attrs:{id:"查询所有schema"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询所有schema"}},[e._v("#")]),e._v(" 查询所有schema")]),e._v(" "),t("ul",[t("li",[e._v("select username from sys.dba_users")]),e._v(" "),t("li",[e._v("select table_name from sys.dba_tables where owner='schema名'")])]),e._v(" "),t("h3",{attrs:{id:"查询用户的默认表空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询用户的默认表空间"}},[e._v("#")]),e._v(" 查询用户的默认表空间")]),e._v(" "),t("ul",[t("li",[e._v("select username,DEFAULT_TABLESPACE from dba_users where username='INFO_USER';")])]),e._v(" "),t("h3",{attrs:{id:"修改用户默认的表空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改用户默认的表空间"}},[e._v("#")]),e._v(" 修改用户默认的表空间")]),e._v(" "),t("ul",[t("li",[e._v("alter user INFO_USER default tablespace INFO_USER;")])]),e._v(" "),t("h3",{attrs:{id:"通过指定表空间查询所属的表名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过指定表空间查询所属的表名"}},[e._v("#")]),e._v(" 通过指定表空间查询所属的表名")]),e._v(" "),t("ul",[t("li",[e._v("Select Table_Name, Tablespace_Name From Dba_Tables Where Tablespace_Name = 'USERS';")])]),e._v(" "),t("h3",{attrs:{id:"通过指定表空间查询所属表的占用空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过指定表空间查询所属表的占用空间"}},[e._v("#")]),e._v(" 通过指定表空间查询所属表的占用空间")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("select segment_name, bytes/1024||'KB' \"占用空间\"\nfrom user_segments \nwhere segment_type='TABLE' and tablespace_name='USERS' order by segment_name asc\n")])])]),t("h3",{attrs:{id:"impdp-examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#impdp-examples"}},[e._v("#")]),e._v(" impdp examples")]),e._v(" "),t("ul",[t("li",[e._v("CREATE OR REPLACE directory DATA_PUMP_DIR AS '/u01/expdpdata';")]),e._v(" "),t("li",[e._v("CREATE DIRECTORY DATA_PUMP_DIR AS '/u01/expdpdata';")]),e._v(" "),t("li",[e._v("impdp siebel/siebel TABLES=SIEBEL.S_AUDIT_READ DUMPFILE=DATA_PUMP_DIR:S_AUDIT_READ.dmp")])]),e._v(" "),t("h3",{attrs:{id:"imp-examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#imp-examples"}},[e._v("#")]),e._v(" imp examples")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("imp system/HaierHaier__123@140.238.224.190/siebel18c.haier.com fromuser=INFO_USER touser=INFO_USER file= info_user.dmp log=imp_info_user.log")])]),e._v(" "),t("li",[t("p",[e._v("imp siebel/siebel@10.0.0.23/siebel18c.subnet.vcn.oraclevcn.com recordlength=65535 buffer=104857600 file=db1100.dmp fromuser=siebel touser=siebel log=imp-1100.log")])])]),e._v(" "),t("h3",{attrs:{id:"批量删除表-drop-table"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#批量删除表-drop-table"}},[e._v("#")]),e._v(" 批量删除表 drop Table")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("declare\n\nbegin\n  for vcur in (select t.TABLE_NAME\n                 from user_tables t\n                where t.TABLE_NAME like '%') loop\n    execute immediate 'drop table '||vcur.TABLE_NAME;\n  end loop;\nend;\n")])])]),t("h3",{attrs:{id:"error-imp-00003-oracle-error-942-encountered"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#error-imp-00003-oracle-error-942-encountered"}},[e._v("#")]),e._v(" ERROR IMP-00003: ORACLE error 942 encountered")]),e._v(" "),t("ul",[t("li",[e._v("检查一下EXP IMP的版本是否一致兼容。包括，源数据库版本，目标数据库版本，导出导入工具版本")]),e._v(" "),t("li",[e._v("正常情况下dbms_stats的权限是通过角色赋予用户的, 在procedure中使用的对象必须显示赋权.")])]),e._v(" "),t("h3",{attrs:{id:"reference-link"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference-link"}},[e._v("#")]),e._v(" Reference Link")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.oracle.com/database/121/SUTIL/GUID-5404703A-05B6-4E76-B58F-C52AB37BFFAF.htm#SUTIL954",target:"_blank",rel:"noopener noreferrer"}},[e._v("impdp examples"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("https://oracle-base.com/articles/10g/oracle-data-pump-10g")]),e._v(" "),t("li",[e._v("https://docs.oracle.com/database/121/SQLRF/statements_7003.htm")])])])}),[],!1,null,null,null);a.default=r.exports}}]);