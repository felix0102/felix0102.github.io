(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{254:function(t,e,a){"use strict";a.r(e);var s=a(6),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"yum-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yum-install"}},[t._v("#")]),t._v(" yum install")]),t._v(" "),a("ul",[a("li",[t._v("yum repository "),a("a",{attrs:{href:"https://dev.mysql.com/downloads/repo/yum/",target:"_blank",rel:"noopener noreferrer"}},[t._v("yum repo"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm")])]),t._v(" "),a("blockquote",[a("p",[t._v("rpm -ivh mysql80-community-release-el7-3.noarch.rpm")])]),t._v(" "),a("blockquote",[a("p",[t._v("yum install -y  mysql-community-server")])]),t._v(" "),a("ul",[a("li",[t._v("配置文件")])]),t._v(" "),a("blockquote",[a("p",[t._v("vi /etc/my.cnf")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[mysqld]\n\nport = 3306\n\ncharacter-set-server=utf8mb4\ncollation-server=utf8mb4_general_ci\n\n# 表名不区分大小写(启动前配置)\nlower_case_table_names=1\n\n#设置日志时区和系统一致\nlog_timestamps=SYSTEM\n\n[client]\ndefault-character-set=utf8mb4\n\n")])])]),a("ul",[a("li",[t._v("启动服务")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#启动服务\nsystemctl start mysqld\n\n#查看版本信息\nmysql -V\n\n#查看状态\nsystemctl status mysqld\n\n##开机启动\nsystemctl enable mysqld\nsystemctl daemon-reload\n\n")])])]),a("ul",[a("li",[t._v("修改账号账号密码")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#1、查看MySQL为Root账号生成的临时密码\ngrep \"A temporary password\" /var/log/mysqld.log\n\n#2、进入MySQL shell\nmysql -u root -p\n\n#3、修改密码\nALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass4!';\n\n")])])]),a("h2",{attrs:{id:"开启mysql-远程链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启mysql-远程链接"}},[t._v("#")]),t._v(" 开启mysql 远程链接")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#选择 mysql 数据库：\nUSE mysql;\n\n#在 mysql 数据库的 user 表中查看当前 root 用户的相关信息：\nSELECT host, user, authentication_string, plugin FROM user;\n\n#设置root 用户远程访问：\nupdate user set host = '%' where user ='root';\n\n#刷新权限：\nFLUSH PRIVILEGES;\n\n#授权的所有权限\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%';\n\n#更新 root 用户密码及加密规则（如果客户端不支持加密插件）：\nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'MyNewPass4!';\n\n#刷新权限：\nFLUSH PRIVILEGES;\n\n")])])]),a("h2",{attrs:{id:"新建远程用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建远程用户"}},[t._v("#")]),t._v(" 新建远程用户")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#1、新建远程用户\nCREATE USER 'devops'@'%' IDENTIFIED BY 'MyNewPass3!';\n\n#2、赋予指定账户指定(数据库名称.表名)远程访问权限\nGRANT ALL PRIVILEGES ON mydb_name.* TO 'devops'@'%';\n\n#3、查看权限\nSHOW GRANTS FOR 'devops'@'%';\n\n#4、收回权限\nREVOKE ALL PRIVILEGES ON *.* FROM 'devops'@'%';\n\n#5、删除用户\nDROP USER 'devops'@'%';\n\n#6、刷新权限\nFLUSH PRIVILEGES;\n\n")])])]),a("h2",{attrs:{id:"找回密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#找回密码"}},[t._v("#")]),t._v(" 找回密码")]),t._v(" "),a("ul",[a("li",[t._v("如果忘记了MySQL root密码，可以用以下方法重新设置：")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#1.关闭MySQL\nservice mysql stop\n\n#2.用以下命令启动MySQL，以不检查权限的方式启动；\nservice mysql start --skip-grant-tables\n\n#3.然后用空密码方式使用root用户登录 MySQL；\nmysql -u root\n\n")])])]),a("h2",{attrs:{id:"修改datadir-启动报权限error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改datadir-启动报权限error"}},[t._v("#")]),t._v(" 修改DataDir 启动报权限error")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/selinux-file-context.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("13 Permission error"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Setting the MySQL Data Directory Context\nThe default data directory location is /var/lib/mysql/; and the SELinux context used is mysqld_db_t.\n\nIf you edit the configuration file to use a different location for the data directory, or for any of the files normally in the data directory (such as the binary logs), you may need to set the context for the new location. For example:\n\nsemanage fcontext -a -t mysqld_db_t "/path/to/my/custom/datadir(/.*)?"\nrestorecon -Rv /path/to/my/custom/datadir\n\nsemanage fcontext -a -t mysqld_db_t "/path/to/my/custom/logdir(/.*)?"\nrestorecon -Rv /path/to/my/custom/logdir\nSetting the MySQL Error Log File Context\nThe default location for RedHat RPMs is /var/log/mysqld.log; and the SELinux context type used is mysqld_log_t.\n\nIf you edit the configuration file to use a different location, you may need to set the context for the new location. For example:\n\nsemanage fcontext -a -t mysqld_log_t "/path/to/my/custom/error.log"\nrestorecon -Rv /path/to/my/custom/error.log\n')])])]),a("h2",{attrs:{id:"mysql-pasword"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-pasword"}},[t._v("#")]),t._v(" mysql pasword")]),t._v(" "),a("ul",[a("li",[t._v("initial password /var/log/mysqld.log")]),t._v(" "),a("li",[t._v("modify passwod")])]),t._v(" "),a("blockquote",[a("p",[t._v("alter user 'root'@'localhost' identified by 'OrcWelcome_123';")])])])}),[],!1,null,null,null);e.default=n.exports}}]);